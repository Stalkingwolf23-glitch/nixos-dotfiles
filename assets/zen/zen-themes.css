/* Zen Mods - Generated by ZenMods.
* FILE GENERATED AT: Wednesday, September 10, 2025 at 10:35:33 AM Singapore Standard Time
* DO NOT EDIT THIS FILE DIRECTLY!
* Your changes will be overwritten.
* Instead, go to the preferences and edit the mods there.
*/

/* Name: Better Spacing */
/* Description: Let Zen breathe with more margin on the URL bar & icons aligned with the browser window */
/* Author: @nalejandroveron */
@-moz-document url-prefix("chrome:") {
  
  :root:not([zen-single-toolbar="true"]) #nav-bar {
    margin: 0.4rem 0;
    margin-bottom: 0.4rem !important;
  }
  
  :root:not([zen-single-toolbar="true"]):not([zen-compact-mode="true"]) #TabsToolbar-customization-target {
    margin-top: 0.8rem;
  }
  
  :root:not([zen-single-toolbar="true"]) #PersonalToolbar:not([collapsed="true"]) {
    margin-bottom: 0.2rem;
  }
  
  :root[zen-single-toolbar="true"] #PersonalToolbar:not([collapsed="true"]) {
    margin: 0.2rem 0;
  }
  
  :root:not([zen-compact-mode="true"])[zen-sidebar-expanded="true"] #zen-sidebar-bottom-buttons {
    margin-bottom: 0.3rem;
  }
  
  :root:not([zen-compact-mode="true"]):not([zen-sidebar-expanded="true"]) #zen-sidebar-bottom-buttons {
    margin-bottom: 1rem;
  }
  
}
/* Name: Download BG */
/* Description: Add a background to the active download indicator. */
/* Author: @different55 */
@-moz-document url-prefix("chrome:") {
  #downloads-indicator-progress-outer::after {
    content: "";
    display: block;
    position: absolute;
    inset: 0;
    z-index: -40;
    background: var(--toolbar-field-background-color);
  }
  
}
/* Name: Quietify */
/* Description: quietify adds a calm visualizer type of animation to mute button to use with style and ease */
/* Author: @wysh3 */
@-moz-document url-prefix("chrome:") {
  /* ---- Volume Icon Theming ---- */
  /* edited from github.com/itsmefen/Dark-Harmony */
  .tabbrowser-tab img {
    transition: opacity 0.3s ease-in-out;
  }
  
  .tabbrowser-tab:is([soundplaying], [muted], [activemedia-blocked]) img {
    opacity: 0 !important;
    transition: opacity 0.1s !important;
  }
  
  .tab-icon-overlay {  
   
    &:is([soundplaying], [muted], [activemedia-blocked]) {
      display: block !important;
      border: 0px !important;
      border-radius: 0px !important;
      top: 0px !important;
      right: 0px !important;
      scale: 1.5 !important;
      opacity: 0.9 !important;
      margin: 0px 3px !important;
      background: white !important;
      /* svg modified from https://samherbert.net/svg-loaders/ */
      --play-svg: url('data:image/svg+xml,%3Csvg%20width%3D%2214%22%20height%3D%2214%22%20viewBox%3D%220%200%20135%20140%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%22%3E%3Crect%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2230%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2260%22%20width%3D%2215%22%20height%3D%22140%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2290%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%22120%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3C%2Fsvg%3E');
      --mute-svg: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxMzYgMTQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiPjxyZWN0IHg9IjQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iMzQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iNjQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iOTQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iMTI0IiB5PSI3MCIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1IiByeD0iNiIvPjwvc3ZnPg==');
      mask-size: 10px 10px !important;
      mask-repeat: no-repeat !important;
      mask-position: center !important;
    }
  
    @media (prefers-color-scheme: light) {
      &:is([soundplaying], [muted], [activemedia-blocked]) {
        filter: invert(1);
      }
    }
  
    &:is([activemedia-blocked]) {
      background: none !important;
      list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEb0lEQVR4nO2YW4hWVRTHP7URvM6ooWYa1kPlQ4GXxISyC4mUVg/RZQyjKLUsUcsmJRm8pqUgXSCRbhZCqT1mkARaWm+l9qK9jCKZ2KhUD4nWLxbuM/1ncfb3nfPNGaeH84cPPtZ/n7XX2pe1/3tXKiVKlChR4v8I4BZgFtCnB/q+AnjQYuiqo2bgby6htbAIs/e/KvRtMTxWr5PpwHn+w3uFR1o7hg+kf4vlnrwOrgHaxckp4Npuizgex3Wh7wS/AWOyftwH2C8f/wFM6Pao4/FMDDEk+BboneXDBXTGbMe/CvwKbOqGoFcCx4Hlzv64i2l+LUdXAmflg22Of9E5bCowif7O92LHfyLcGWBYNWerXePhwt0JXBT+G6BXUYmEPvaKf+trmnAj3CCvjDkZ5Bq2CDcwTHmCX4DRRSYR+hkNnJR+jgEDhH/FDfTANCdPukaDhXtNuL+AKe7Qmgc8kjNoKyrPAwuBBrHfGvpIsEa4wSG2BE+kOf5aGrwl9mGuarzhvtsqXOZkgOfku3cdt1G434Ghwr0t3B7vtNGt/8nCLXUzpU7nC5c+QvFEnnXfzhVuqFvmS4WbIvYLunIqQUslOKWbGDgk3GqxD3HTvE+XSGjTFxgXfn1TOPtGD7sm4dcId1DsvYHTwt2nTtcJ8anbfIrxkQrX7ipc/7A8zkkb+/860E/aDXeDsUq4Ca7vq4XbkbaHjNglRMdhZEJN7G1upn4W7mWXxHfEccAl0yLcEbH3cpXyUXcoJ9ihiRwU4qHIqOtM3Sh2U6YjIhs1hg3S/ipR2IYbhNtOyrkBPCz2HzURzfx2sW8T+2axPyD2Q27d63KK4awruT8Jd3+KjDd8KPZpYj+miZyJ7IPPI8tHK84XYrdNnRU68rvTdBSwROy7IvunPW8iLZGyuzuy5GrhevnuS7HP60oiurRuE/tHGZbW4R5eWm15N/tnkZG3jTpSOCuxtbBe2o8C/onM1PYMm/0HTWRnpPzanV0FnJbfo5Fl1y+U2Bj2u/K7rI7yuyJWftdGyuwYF8T4yLR7yW/JbHAyw/6vd0lEpTmXboaxA3FnmtowYmYViXI4okSb3L0+TaI0iERJ46pJlLVpZ0WQKNY2wb1eNJoAS9DxjmRl142qisa5btSeqdSnfg1PO8WtM/WScFPFbjEPqibj36wi4ze677YI15wjEbuLJNjiuE1VZPw7wn2V92K1zr0vTXUXq6dsM+a5+oZS/UKYmQY34ucjirvRzdScvFfdAa6CnMz8vtS1q26biVDhlwvXnnrVzfD4cIe7fH1f5OND2MQH3PpX3TfSHbattZ6DVK587PjFdEZjgYlY34pFjtfD0arWkLzVxD/Q2fSeUCleYDKbQ5DLnH1O7uoYXjfsWTKBVayJlR4CMAn4U+LZm+nJVE50/4g9ttujdrCHc/eIfVpP+EywJ3xXBjvV+ssB4H3p32K5q15HzVKpOp5kLheA1tD3RRWN9Tq7Cbi7sOjyl+QZwM090X+JEiVKlKjUwr/rwkME7dPwYwAAAABJRU5ErkJggg==") !important;
      width: 16px !important;
      height: 16px !important;
      margin: 0px 3px !important;
    }
  
    &:is([soundplaying]) {
      list-style-image: none !important;
      mask-image: var(--play-svg) !important;
    }
  
    &:is([muted]) {
      list-style-image: none !important;
      mask-image: var(--mute-svg) !important;
    }
  }
  @media not (-moz-bool-pref: "zen.view.sidebar-expanded") {
      .tabbrowser-tab:is([soundplaying], [muted], [activemedia-blocked]):hover img {
          opacity: 1 !important;
          transition: opacity 0.1s ease-out !important;
      }
  
      .tabbrowser-tab:is([soundplaying], [muted], [activemedia-blocked]):hover .tab-icon-overlay { 
          margin: 0px !important;
          transition: opacity 0.1s ease-out, transform 0.1s ease-out !important;
          transform: translate(6.9px, -6.9px) scale(0.69) !important;
      }
    }
  #zen-essentials-container {
    .tab-icon-overlay:is([soundplaying], [muted]) {
      margin: 0px !important;
    }
  
    .tabbrowser-tab:is([soundplaying], [muted], [activemedia-blocked]) img {
      opacity: 0 !important;
    }
  }
  
}
/* Name: Animations Plus */
/* Description: A nice animation pack for Zen Browser */
/* Author: @Anoms12 */
@-moz-document url-prefix("chrome:") {
  .tab-background {
    transition:
      background-color 0.4s ease,
      box-shadow 0.4s ease,
      background 0.5s ease !important;
  }
  
  .tab-group-label-container {
    transition:
      background-color 0.4s ease,
      box-shadow 0.4s ease,
      background 0.5s ease !important;
  }
  
  .toolbarbutton-1 {
    &:hover
      > :is(
        .toolbarbutton-icon,
        .toolbarbutton-text,
        .toolbarbutton-badge-stack
      ) {
      transition:
        background-color 0.3s ease-in-out,
        outline-color 0.3s ease-in-out; /* Smooth transition */
    }
  
    > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
      transition:
        background-color 0.3s ease-in-out,
        outline-color 0.3s ease-in-out;
    }
  }
  
  .identity-box-button {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 1.3s ease-in-out;
  }
  
  /* Apply transition to urlbar controls, this is what I found worked...*/
  #reader-mode-button,
  #star-button-box,
  #zen-split-views-box,
  #pageActionButton,
  #urlbar-zoom-button,
  #shopping-sidebar-button,
  #translations-button,
  #picture-in-picture-button,
  #page-action-buttons,
  #urlbar-go-button,
  #urlbar-revert-button-container {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out !important;
  }
  
  /* Animate the tab function icons */
  .close-icon {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  }
  
  .tab-reset-button {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  } /* Transition properties for tab background */
  .tab-background {
    transition:
      background-color 0.4s ease,
      box-shadow 0.4s ease,
      background 0.5s ease !important;
  }
  
  .tab-group-label-container {
    /* Transition properties for tab background */
    transition:
      background-color 0.4s ease,
      box-shadow 0.4s ease,
      background 0.5s ease !important;
  }
  
  /* For toolbarbutton-1 */
  .toolbarbutton-1 {
    &:hover
      > :is(
        .toolbarbutton-icon,
        .toolbarbutton-text,
        .toolbarbutton-badge-stack
      ) {
      transition:
        background-color 0.3s ease-in-out,
        outline-color 0.3s ease-in-out; /* Smooth transition */
    }
  
    > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
      transition:
        background-color 0.3s ease-in-out,
        outline-color 0.3s ease-in-out;
    }
  }
  
  .identity-box-button {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 1.3s ease-in-out;
  }
  
  /* Apply transition to urlbar controls, this is what I found worked...*/
  #reader-mode-button,
  #star-button-box,
  #zen-split-views-box,
  #pageActionButton,
  #urlbar-zoom-button,
  #shopping-sidebar-button,
  #translations-button,
  #picture-in-picture-button,
  #page-action-buttons,
  #urlbar-go-button,
  #urlbar-revert-button-container {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out !important;
  }
  
  /* Animate the tab function icons */
  .close-icon {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  }
  
  .tab-reset-button {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  }
  
  /* This was not being applied properly by class for some reason */
  #tabs-newtab-button {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  }
  
  /* Other things that needed to be animated/transitioned */
  .subviewbutton {
    transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
  }
  
  .urlbarView-row-inner {
    transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
  }
  
  /* This was not being applied properly by class for some reason */
  #tabs-newtab-button {
    transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
  }
  
  /* Other things that needed to be animated/transitioned */
  .subviewbutton {
    transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
  }
  
  .urlbarView-row-inner {
    transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
  }
  
}
/* Name: Zen Context Menu */
/* Description: Declutter your right click menu, hide options you don't need */
/* Author: @KiKaraage */
/* Zen Context Menu v3.1 by KiKaraage */

/* Fix ergonomics for tab context menu by applying some reorderings 
* plus hiding disabled options and some separators
* Applied by default when enabling Zen Context Menu mod */
@media -moz-pref("uc.fixcontext.ergonomicsfortabs") {
  #tabContextMenu {
    :nth-child(22), /* Separator below "Duplicate Tab" */
    #context_bookmarkTab, #context_bookmarkSelectedTabs,
    #context_moveTabOptions,
    #context_selectAllTabs, :nth-child(31), /* Separator below "Select All Tabs" */
    #context_selectedAllTabs, #toolbar-context-selectAllTabs,
    #context_closeTabOptions,
    :nth-child(37), /* Separator below "Split Tabs" */
    #context_zen-pinned-tab-separator, /* Separator above Replace Pinned URL */
    #context_zenSplitTabs[label="Split Tab (multiple selected tabs needed)"],
    #context_zenSplitTabs[disabled="true"],
    #context_closeDuplicateTabs[disabled]{
      display: none;
    }
    #context_toggleMuteTab,
    #context_toggleMuteSelectedTabs,
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_pinTab,
    #context_pinSelectedTabs,
    #context_unpinTab,
    #context_unpinSelectedTabs,
    #context_zenSplitTabs:not([disabled="true"]) {
      order: -8 !important;
    }
    #context_duplicateTab,
    #context_duplicateTabs,
    #context_unloadTab {
      order: -7 !important;
    }
    :nth-child(6), /* Separator below "New Folder" */
    #zen-context-menu-new-folder {
      order: -6 !important;
    }
    #context_moveTabToGroup,
    #context_reopenInContainer,
    #context-zen-change-workspace-tab {
      order: -5 !important;
    }
    :nth-child(35), /* Separator below "Change Tabs to Workspace" */ 
    #context_sendTabToDevice,
    #context_zenSplitTabs,
    #context_undoCloseTab {
      order: -3 !important;
    } 
    #context_closeTab,
    #context_closeDuplicateTabs,
    #context_zen-reset-pinned-tab,
    #context_zen-replace-pinned-url-with-current {
      order: 2;
    }
  }
}
/* Hide all separators */
@media -moz-pref("uc.hidecontext.separators") {
  menuseparator::before {
    border-top: none !important;
  }
  menuseparator {
    padding-block: 0px !important;
  }
}
/* Hide all icons in context menu, except checkboxes and radio buttons, to fit current Zen styling */
@media -moz-pref("uc.hidecontext.icons") {
  :not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup
  > menuitem:not(
  .menuitem-iconic,
  [type='checkbox'],
  [type='radio'],
  .in-menulist,
  .in-menulist menuitem,
  .unified-nav-current
  ),
  :not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup
  > menu:not(
  .menu-iconic,
  [type='checkbox'],
  [type='radio'],
  .in-menulist,
  .in-menulist menu,
  .unified-nav-current
  ),
  :not(:not(menubar) > menu, #ContentSelectDropdown) > menupopup > menucaption {
    padding-inline: 6px !important;
  }
  menupopup > menuitem:is([type='checkbox']) .menu-iconic-left {
    --menu-image: none !important;
    margin-inline-start: 4px !important;
    @media not (-moz-platform: windows) {
      margin-inline-end: 0 !important;
      padding-inline-end: 0 !important;
    }
  }
  .textbox-contextmenu,
  menupopup:has(menuitem[type="radio"], menuitem[type="checkbox"]),
  menu:has(menuitem[type="radio"], menuitem[type="checkbox"]) {
    .menu-icon {
      display: none !important;
    }
    menuitem[type="radio"],
    menuitem[type="checkbox"],
    #context-navigation {
      .menu-icon {
        display: inherit !important;
      }
    }
  }
  menupopup[needsgutter] {
    @media (-moz-platform: windows) {
      & > menu:not([icon], .menu-iconic), & > menuitem:not([checked="true"], [icon], .menuitem-iconic) {
        padding-inline-start: 12px !important;
      }
    }
  }
}
/* Apply Zen workspace gradient to all context menu and panels
* Suitable if the OS, desktop environment or window manager supported blur background */
@media -moz-pref("uc.fixcontext.applyzengradient") {
  menupopup, panel {
    --panel-background: var(--zen-main-browser-background) !important;
  }
  /* Fix text color on Firefox confirmation pop-ups when applying Zen colors on light mode */
  #confirmation-hint {
    --arrowpanel-color: var(--sidebar-text-color) !important;
    border: none !important;
  }
}
/* Apply Zen workspace accent color to all context menu and panels*/
@media -moz-pref("uc.fixcontext.applyzenaccent") {
  menupopup, panel {
    --panel-background: color-mix(in srgb, var(--zen-primary-color) 40%, var(--zen-colors-tertiary)) !important;
  }
}
/* Prioritize “Copy Clean Link" when available, otherwise, only show "Copy Link” */
@media -moz-pref("uc.hidecontext.copylink") {
  #contentAreaContextMenu:has(#context-stripOnShareLink[disabled="false"]) {
    #context-copylink {
      display: none !important;
    }
  }
  #context-stripOnShareLink[disabled="true"] {
    display: none !important;
  }
}
/* Hide "Bookmark Link” */
@media -moz-pref("uc.hidecontext.bookmark") {
  #toolbar-context-bookmarkSelectedTab,
  #toolbar-context-bookmarkSelectedTabs,
  #context-bookmarklink {
    display: none !important;
  }
}
/* Hide "Mute Tab" option */
@media -moz-pref("uc.hidecontext.mutetab") {
  #context_toggleMuteTab,
  #context_toggleMuteSelectedTabs,
  #context_playTab,
  #context_playSelectedTabs {
    display: none !important;
  }
}
/* Hide “Open Tab/Link in New Container Tab” */
@media -moz-pref("uc.hidecontext.newcontainer") {
  #context_reopenInContainer,
  #context-openlinkinusercontext-menu {
    display: none !important;
  }
}
/* Hide “Send Tab/Link to Device” */
@media -moz-pref("uc.hidecontext.sendtodevice") {
  #context_sendTabToDevice,
  #context-sendpagetodevice,
  #context-sendlinktodevice,
  #context-sep-sendlinktodevice {
    display: none !important;
  }
}
/* Hide "Close Tabs" & "Close Duplicate Tabs"*/
@media -moz-pref("uc.hidecontext.closetab") {
  #context_closeTab,
  #context_closeDuplicateTabs {
    display: none !important;
  }
}
/* Hide “Search Keywords" with your preferred search engine */
@media -moz-pref("uc.hidecontext.search") {
  #context-searchselect {
    display: none !important;
  }
}
/* Hide “Search Keywords in a Private Window” */
@media -moz-pref("uc.hidecontext.searchinpriv") {
  #context-searchselect-private {
    display: none !important;
  }
}
/* Hide "Translate Selection/Link" options */
@media -moz-pref("uc.hidecontext.translate") {
  #context-translate-selection,
  #frame-sep {
    display: none !important;
  }
}
/* Hide "Ask AI chatbot" options */
@media -moz-pref("uc.hidecontext.askchatbot") {
  #context-ask-chat {
    display: none !important;
  }
}
/* Hide "Print Selection” */
@media -moz-pref("uc.hidecontext.printselection") {
  #context-print-selection {
    display: none !important;
  }
}
/* Hide “Email Image”, “Set Image as Desktop Background”, and “View Image Info” options */
@media -moz-pref("uc.hidecontext.image") {
  #context-sendimage,
  #context-sep-setbackground,
  #context-setDesktopBackground,
  #context-sep-sharing,
  #context-viewimageinfo {
    display: none !important;
  }
}
/* Hide "Copy Video Link", "Copy Audio Link", "Email Video" and "Email Audio" options */
@media -moz-pref("uc.hidecontext.audiovideo") {
  #context-copyvideourl,
  #context-copyaudiourl,
  #context-sendvideo,
  #context-sendaudio,
  #context-sep-sharing {
    display: none !important;
  }
}
/* Hide "Check Spelling" and "Text/Page Direction" option while typing in text fields */
@media -moz-pref("uc.hidecontext.checkspelling") {
  #spell-separator,
  #spell-check-enabled,
  #spell-add-dictionaries-main,
  #spell-dictionaries,
  #context-sep-bidi,
  #context-bidi-text-direction-toggle,
  #context-bidi-page-direction-toggle {
    display: none !important;
  }
}
/* Hide "Take Screenshot" option */
@media -moz-pref("uc.hidecontext.screenshot") {
  #context-take-screenshot,
  #context-sep-screenshots,
  #frame-sep {
    display: none !important;
  }
}
/* Hide "This Frame" option */
@media -moz-pref("uc.hidecontext.frame") {
  #frame-sep, #frame {
    display: none !important;
  }
}
/* Hide “Select All Text” option */
@media -moz-pref("uc.hidecontext.selectalltext") {
  #context-selectall,
  #context-sep-selectall {
    display: none !important;
  }
}
/* Hide “Reload Tab” option */
@media -moz-pref("uc.hidecontext.reloadtab") {
  #context_reloadTab,
  #context_reloadSelectedTabs,
  #toolbar-context-reloadSelectedTab,
  #toolbar-context-reloadSelectedTabs {
    display: none !important;
  }
}
/* Hide "Duplicate Tab" */
@media -moz-pref("uc.hidecontext.duplicatetab") {
  #context_duplicateTab,
  #context_duplicateTabs,
  #tabContextMenu > :nth-child(21) {
    display: none !important;
  }
}
/* Hide “View Page Source”, "View Selection Source" and “Inspect” options */
@media -moz-pref("uc.hidecontext.inspect") {
  #context-viewsource,
  #context-inspect-a11y,
  #context-inspect,
  #inspect-separator,
  #context-media-eme-separator,
  #context-viewpartialsource-selection {
    display: none !important;
  }
}
/* Hide “Save Page As and Save Link As” */
@media -moz-pref("uc.hidecontext.savelink") {
  #context-savepage,
  #context-savelink {
    display: none !important;
  }
}
/* Hide "Pin Tab" and "Add to Essentials" options */
@media -moz-pref("uc.hidecontext.pin") {
  #context_pinTab,
  #context_unpinTab,
  #context_pinSelectedTabs,
  #context_unpinSelectedTabs,
  #context_zen-add-essential,
  #context_zen-remove-essential {
    display: none !important;
  }
}
/* Hide top buttons (Back, Forward, Reload, Bookmark Page) on page context menu */
@media -moz-pref("uc.hidecontext.navigation") {
  #context-navigation, #context-sep-navigation {
    display: none !important;
  }
}


/* Restore back context menu icons pre-1.12.9b */
/* I'm not guaranteeing there will be icons for future context menu options */
/* Help me contribute on this, hit me up on github.com/KiKaraage/ZenMods/issues */

/* PART 1: Setting inline padding and margin values */
:root {
  @media -moz-pref("uc.fixcontext.restoreicons") {
    --zen-contextmenu-menuitem-padding-inline: 5px !important;
    --zen-contextmenu-menuicon-margin-inline: 3px !important;
    --zen-contextmenu-menuitem-margin: 0px 2px !important;
  }
}

@media -moz-pref("uc.fixcontext.restoreicons") {
  /* PART 2: Adding start inline padding to options, 
  * For now this also affected items with existing paddings
  * Like on toolbar context menu, or on extension options
  * Help me fix this, hit me up on github.com/KiKaraage/ZenMods/issues */
  .menu-text {
    @media (-moz-platform: windows) {
      padding-inline-start: 24px !important;
    }
  }   

  /* PART 3: Adding icons back to regular context menu options */
  :not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup
  > menuitem:not(
  .menuitem-iconic,
  [type='checkbox'],
  [type='radio'],
  .in-menulist,
  .in-menulist menuitem,
  .unified-nav-current
  ) {
    background-image: var(--menu-image) !important;
    background-size: 16px !important;
    background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
    background-repeat: no-repeat !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
  }

  /* PART 4: Adding icons back to context menu options that has arrow */
  :not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup > menu:not(
  .menu-iconic, [type='checkbox'], [type='radio'],
  .in-menulist, .in-menulist menu, .unified-nav-current
  ),
  #toggle_toolbar-menubar,
  #PanelUI-history toolbarbutton,
  #unified-extensions-context-menu menuitem {
    background-image: var(--menu-image) !important;
    background-size: 16px !important;
    background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
    background-repeat: no-repeat !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important; 
  }

  /* PART 5: Normalize left padding for options with checkboxes, like Compact Mode options
  * Still not applied to options like 'Tabs on the right' sadly
  * Help me fix this, hit me up on github.com/KiKaraage/ZenMods/issues */
  @media (-moz-platform: windows) {
    @media -moz-pref("uc.fixcontext.restoreicons") {
      menupopup > menuitem[checked='true'] {
        padding-inline-start: var(--zen-contextmenu-menuicon-margin-inline) !important;
        > .menu-text {
          padding: 0 !important;
        }
      }
      menupopup > menuitem[checked='false'] {
        padding-inline: calc(var(--zen-contextmenu-menuicon-margin-inline) + 0px) !important;
      }
    }
  }
}

/* PART 6: Specifying icons to apply for options in Unified Extensions Menu */
@media not (-moz-platform: linux) {
  @media -moz-pref("uc.fixcontext.restoreicons") {
    .unified-extensions-context-menu-pin-to-toolbar {
      --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
    }
  }
  .unified-extensions-context-menu-move-widget-down {
    --menu-image: url('chrome://browser/skin/zen-icons/arrow-down.svg');
  }
  .unified-extensions-context-menu-move-widget-up {
    --menu-image: url('chrome://browser/skin/zen-icons/arrow-up.svg');
  }
}

/* PART 7:  Specifying icons to apply for other context menu options */
/* Use icons from Zen icon directory - chrome://browser/skin/zen-icons/ */
/* Use icons from Firefox icon directory - chrome://browser/skin/ */
@media -moz-pref("uc.fixcontext.restoreicons") {  
  #context_zenSplitTabs {
    --menu-image: url('chrome://browser/skin/zen-icons/sidebars-right.svg') !important;
  }
  #context-zenSplitLink {
    --menu-image: url('chrome://browser/skin/zen-icons/split.svg') !important;
  }

  #context_zenOpenWorkspace,
  #context_zenOpenWorkspacePanel {
    --menu-image: url('chrome://browser/skin/zen-icons/manage.svg') !important;
  }
  #context_zenEditWorkspaceIcon {
    --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg') !important;
  }
  .zenToolbarThemePicker,
  #zenToolbarThemePicker {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-theme.svg') !important;
  }
  #context-video-pictureinpicture:not([checked='true']) .menu-iconic-icon {
    list-style-image: url('chrome://browser/skin/zen-icons/media-pip.svg') !important;
  }
  #context-media-loop:not([checked='true']) .menu-iconic-icon {
    list-style-image: url('chrome://browser/skin/zen-icons/media-loop.svg') !important;
  }

  #context-savepage {
    --menu-image: url('chrome://browser/skin/zen-icons/save.svg');
  }
  #context-selectall,
  .textbox-contextmenu menuitem[cmd*='selectAll'],
  #context_selectAllTabs,
  #toolbar-context-selectAllTabs {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-select-all.svg');
  }
  #context-undo,
  .textbox-contextmenu menuitem[cmd*='undo'],
  #context_undoCloseTab,
  #toolbar-context-undoCloseTab {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-undo.svg');
  }
  #toggle_toolbar-menubar {
    --menu-image: url('chrome://browser/skin/zen-icons/menu-bar.svg');
  }
  #context-redo,
  .textbox-contextmenu menuitem[cmd*='redo'] {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-redo.svg');
  }
  #context-copy,
  .textbox-contextmenu menuitem[cmd*='copy'],
  .textbox-contextmenu #strip-on-share,
  #placesContext_copy {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-copy.svg');
  }
  #context-paste,
  .textbox-contextmenu menuitem[cmd*='paste'],
  #placesContext_paste,
  #placesContext_paste_group {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-paste.svg');
  }
  #context-cut,
  .textbox-contextmenu menuitem[cmd*='cut'],
  #placesContext_cut {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-cut.svg');
  }
  #context-delete,
  .customize-context-removeExtension,
  .unified-extensions-context-menu-remove-extension,
  .textbox-contextmenu menuitem[cmd*='delete'],
  menuitem[id='placesContext_deleteBookmark'],
  menuitem[id='placesContext_deleteFolder'],
  menuitem[id='placesContext_delete'],
  menuitem[id='placesContext_delete_history'],
  menuitem[id='placesContext_deleteHost'],
  #context_zenDeleteWebPanel,
  #context_zenDeleteWorkspace {
    --menu-image: url('chrome://browser/skin/zen-icons/edit-delete.svg');
  }
  #paste-and-go {
    --menu-image: url('chrome://browser/skin/zen-icons/paste-and-go.svg');
  }
  #context-print-selection {
    --menu-image: url('chrome://browser/skin/zen-icons/print.svg');
  }
  #context-take-screenshot {
    --menu-image: url('chrome://browser/skin/zen-icons/screenshot.svg');
  }
  #context-viewsource {
    --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
  }
  #context-inspect-a11y {
    --menu-image: url('chrome://browser/skin/zen-icons/accessibility.svg');
  }
  #context-inspect {
    --menu-image: url('chrome://browser/skin/zen-icons/inspect.svg');
  }
  #context-searchselect {
    --menu-image: url('chrome://browser/skin/zen-icons/search-glass.svg');
  }
  #context-searchselect-private {
    --menu-image: url('chrome://browser/skin/privateBrowsing.svg');
  }
  #context-viewimage {
    --menu-image: url('chrome://browser/skin/zen-icons/image-open.svg');
  }
  #context-viewimageinfo {
    --menu-image: url('chrome://browser/skin/zen-icons/info.svg');
  }
  #context-saveimage,
  #context-video-saveimage {
    --menu-image: url('chrome://browser/skin/zen-icons/image-save.svg');
  }
  #context-savevideo {
    --menu-image: url('chrome://browser/skin/zen-icons/video-save.svg');
  }
  #context-viewvideo {
    --menu-image: url('chrome://browser/skin/zen-icons/video-open.svg');
  }
  #context-saveaudio {
    --menu-image: url('chrome://browser/skin/zen-icons/audio-save.svg');
  }
  #context-copyimage-contents {
    --menu-image: url('chrome://browser/skin/zen-icons/image-copy.svg');
  }
  #context-copyimage,
  #context-copyvideourl,
  #context-copylink,
  #context-stripOnShareLink,
  #context_zenOpenNewTabWebPanel,
  #context-pdfjs-copy {
    --menu-image: url('chrome://browser/skin/zen-icons/link.svg');
  }
  #placesContext_open,
  #context-openlinkincurrent {
    --menu-image: url('chrome://browser/skin/zen-icons/ext-link.svg');
  }
  #context-ask-chat {
    --menu-image: url('chrome://browser/skin/trending.svg');
  }
  #context-translate-selection {
    --menu-image: url('chrome://browser/skin/translations.svg');
  }
  #context-viewsource,
  #context-viewframesource,
  #context-viewpartialsource-selection {
    --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
  }
  #context-sendimage,
  #context-sendvideo,
  #context-sendaudio {
    --menu-image: url('chrome://browser/skin/zen-icons/mail.svg');
  }
  #context-setDesktopBackground,
  .viewCustomizeToolbar {
    --menu-image: url('chrome://browser/skin/zen-icons/customize.svg');
  }
  #context-reloadimage,
  #context_reloadTab,
  #context_reloadSelectedTabs,
  #toolbar-context-reloadSelectedTab,
  #toolbar-context-reloadSelectedTabs,
  #context_zen-reset-pinned-tab {
    --menu-image: url('chrome://browser/skin/zen-icons/reload.svg');
  }
  #context-sendlinktodevice,
  #context_sendTabToDevice,
  #context-sendpagetodevice {
    --menu-image: url('chrome://browser/skin/zen-icons/send-to-device.svg');
  }
  #context-openlinkintab,
  #context-openlinkincontainertab,
  #context_zenWorkspacesOpenInContainerTab,
  #context_zenWebPanelContextInContainer,
  menuitem[id='placesContext_open:newtab'],
  menuitem[id='placesContext_openLinks:tabs'],
  menuitem[id='placesContext_openBookmarkLinks:tabs'],
  menuitem[id='placesContext_openBookmarkContainer:tabs'] {
    --menu-image: url('chrome://browser/skin/zen-icons/tab.svg');
  }
  #context_openANewTab,
  #toolbar-context-openANewTab {
    --menu-image: url('chrome://browser/skin/zen-icons/new-tab-image.svg');
  }
  #context-openlinkinusercontext-menu,
  menu[id='placesContext_open:newcontainertab'],
  menu[id='placesContext_openContainer:tabs'] {
    --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
  }
  #context-openlink,
  menuitem[id='placesContext_open:newwindow'] {
    --menu-image: url('chrome://browser/skin/zen-icons/window.svg');
  }
  #context-openlinkprivate,
  menuitem[id='placesContext_open:newprivatewindow'] {
    --menu-image: url('chrome://browser/skin/zen-icons/private-window.svg');
  }
  #context-savelink {
    --menu-image: url('chrome://browser/skin/zen-icons/downloads.svg');
  }
  #spell-add-to-dictionary {
    --menu-image: url('chrome://browser/skin/zen-icons/add-to-dictionary.svg');
  }
  #manage-saved-logins {
    --menu-image: url('chrome://browser/skin/zen-icons/passwords.svg');
  }
  #context-media-play,
  #context_playTab,
  #context_playSelectedTabs {
    --menu-image: url('chrome://browser/skin/zen-icons/media-play.svg');
  }
  #context-media-pause {
    --menu-image: url('chrome://browser/skin/zen-icons/media-pause.svg');
  }
  #context-media-mute,
  #context_toggleMuteTab,
  #context_toggleMuteSelectedTabs,
  #context_zenToggleMuteWebPanel {
    --menu-image: url('chrome://browser/skin/zen-icons/media-mute.svg');
  }
  #context-media-unmute,
  #context_toggleMuteTab[muted],
  #context_toggleMuteSelectedTabs[muted],
  #context_zenToggleMuteWebPanel[muted] {
    --menu-image: url('chrome://browser/skin/zen-icons/media-unmute.svg');
  }
  #context-media-playbackrate {
    --menu-image: url('chrome://browser/skin/zen-icons/media-speed.svg');
  }
  #context-video-fullscreen {
    --menu-image: url('chrome://browser/skin/zen-icons/fullscreen.svg');
  }
  #context-leave-dom-fullscreen,
  menuitem[contexttype='fullscreen'][label*='Exit'] {
    --menu-image: url('chrome://browser/skin/zen-icons/fullscreen-exit.svg');
  }
  #context-media-hidecontrols,
  #context-media-showcontrols {
    --menu-image: url('chrome://browser/skin/zen-icons/permissions.svg');
  }
  #context_pinTab,
  #context_unpinTab,
  #context_pinSelectedTabs,
  #context_unpinSelectedTabs,
  .customize-context-moveToPanel,
  #context_zen-replace-pinned-url-with-current {
    --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
  }
  #context_zen-add-essential {
    --menu-image: url('chrome://browser/skin/zen-icons/essential-add.svg');
  }
  #context_zen-remove-essential {
    --menu-image: url('chrome://browser/skin/zen-icons/essential-remove.svg');
  }
  .customize-context-removeFromToolbar {
    --menu-image: url('chrome://browser/skin/zen-icons/unpin.svg');
  }
  #zen-sidebar-web-panel-pinned[pinned='true'] {
    list-style-image: url('chrome://browser/skin/zen-icons/pin.svg') !important;
  }
  #zen-sidebar-web-panel-pinned {
    list-style-image: url('chrome://browser/skin/zen-icons/unpin.svg') !important;
  }
  #context_duplicateTab,
  #context_duplicateTabs,
  menuitem[data-l10n-id="zen-panel-ui-workspaces-create"] {
    --menu-image: url('chrome://browser/skin/zen-icons/duplicate-tab.svg');
  }
  #zen-context-menu-compact-mode {
    --menu-image: url('chrome://browser/skin/zen-icons/sidebar.svg');
  }
  #context_bookmarkTab,
  #context_bookmarkSelectedTabs,
  #toggle_PersonalToolbar,
  #context-bookmarklink,
  #toolbar-context-bookmarkSelectedTab,
  #toolbar-context-bookmarkSelectedTabs {
    --menu-image: url('chrome://browser/skin/zen-icons/bookmark-hollow.svg');
  }
  menuitem[id='placesContext_show_bookmark:info'],
  menuitem[id='placesContext_show_folder:info'],
  menuitem[id='placesContext_show:info'] {
    --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
  }
  menuitem[id='placesContext_showAllBookmarks'],
  #BMB_bookmarksShowAllTop,
  #BMB_bookmarksShowAll,
  .customize-context-manageExtension,
  .unified-extensions-context-menu-manage-extension {
    --menu-image: url('chrome://browser/skin/zen-icons/manage.svg');
  }
  #BMB_viewBookmarksSidebar {
    --menu-image: url('chrome://browser/skin/sidebars.svg');
  }
  #BMB_searchBookmarks {
    --menu-image: url('chrome://browser/skin/zen-icons/search-page.svg');
  }
  menuitem[id='placesContext_new:bookmark'],
  menuitem[id='placesContext_new:folder'],
  menuitem[id='placesContext_new:separator'],
  #context_zenEditWorkspace {
    --menu-image: url('chrome://browser/skin/zen-icons/plus.svg');
  }
  #context-savelinktopocket,
  #context-pocket {
    --menu-image: url('chrome://browser/skin/zen-icons/pocket-outline.svg');
  }
  #context_ungroupTab,
  #context_moveTabOptions,
  #context-zen-change-workspace-tab,
  #context_zenReorderWorkspaces {
    --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
  }
  .share-tab-url-item {
    --menu-image: url('chrome://browser/skin/zen-icons/share.svg');
  }
  #zen-context-menu-new-folder-toolbar,
  #zen-context-menu-new-folder {
    --menu-image: url('chrome://browser/skin/zen-icons/folder.svg');
  }
  #context_moveTabToNewGroup,
  #context_moveTabToGroup,
  #context_reopenInContainer {
    --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
  }
  #context_closeTab,
  #context_closeDuplicateTabs {
    --menu-image: url('chrome://browser/skin/zen-icons/close.svg');
  }
  #context_closeTabOptions {
    --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
  }
  #context_unloadTab,
  #context_zenTabActions {
    --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
  }
  .customize-context-reportExtension,
  .unified-extensions-context-menu-report-extension {
    --menu-image: url('chrome://browser/skin/zen-icons/report.svg');
  }
  .wordmark::after {
    content: 'Plus' !important;
  }
  #placesContext > menuitem[id="placesContext_sortBy:name"] {
    --menu-image: url('chrome://browser/skin/zen-icons/translations.svg');
  }
} 


/* PART 8: Improving the text margin one by one */
@media -moz-pref("uc.fixcontext.restoreicons") {
  /* 8A: Tab Context Menu */
  #tabContextMenu {
    menuitem:not(.menuitem-iconic) > .menu-text,
    menu > .menu-text {
      margin-inline-start: 24px!important;
    }
    #context_reopenInContainerPopupMenu,
    #context-zen-change-workspace-tab-menu-popup,
    #context_sendTabToDevicePopupMenu, #closeTabOptions, #moveTabOptionsMenu {
      menuitem:not(.menuitem-iconic) > .menu-text,
      menu > .menu-text {
        margin-inline-start: 0 !important;
      } 
    } 
  }
  /* 8B: Workspace Context Menu */
  #zenWorkspaceMoreActions {
    menuitem > .menu-text,
    menu > .menu-text {
      margin-inline-start: 24px !important;
    }
    #context_zenWorkspacesOpenInContainerTab > menupopup {
      menuitem > .menu-text,
      menu > .menu-text {
        margin-inline-start: 0 !important;
      } 
    }
  }
  /* 8C: Content Area Context Menu */
  #contentAreaContextMenu {
    menuitem:not(.menuitem-iconic,
      #context-undo, #context-redo, #context-cut, #context-copy,
      #context-paste, #context-delete
    ) > .menu-text,
    menu > .menu-text {
      margin-inline-start: 24px!important;
    }
    #context-ask-chat > menupopup,
    #context-sendpagetodevice-popup,
    #context-sendlinktodevice-popup
    {
      menuitem > .menu-text,
      menu > .menu-text {
        margin-inline-start: 0 !important;
      } 
    } 
  }
  /* 8D: Text Context Menu */
  .textbox-contextmenu {
    .menu-text {
      margin-inline-start: 24px !important;
    }
  }
  /* 8E: Bookmarks Context Menu */
  #placesContext {
    menuitem > .menu-text,
    menu > .menu-text {
      margin-inline-start: 0px !important;
    }
    #placesContext_open_newcontainertab_popup,
    #toggle_PersonalToolbar > menupopu {
      menuitem > .menu-text,
      menu > .menu-text {
        margin-inline-start: 0 !important;
      } 
    }
  }
}

/* Name: Lean */
/* Description: Extensions. Spaces. Toolbars. Clean them up, give extra room for your stuff */
/* Author: @KiKaraage */
/*
* github.com/KiKaraage/
* ZenMods/Lean
* Show things only when you need it: Top & bottom buttons, workspace indicator, bookmarks bar and more
*/

/* 0 - Tidy up extension menu by default */
/* Reduce icon size in extension menu  */
:root {
  --uei-icon-size: 20px !important;
}

@media not (-moz-bool-pref: "mod.extension.viewgrid") {
  /* Hide header, description, extension captions */
  #unified-extensions-view box.panel-header,
  #unified-extensions-view > :nth-child(2),
  #unified-extensions-description,
  #unified-extensions-messages-container,
  .unified-extensions-item-message-deck {
    display: none !important;
  }
  /* Reduce the panel size and padding */
  #unified-extensions-view {
    width: var(--menu-panel-width) !important;
  }
  #overflowed-extensions-list {
    padding-block-start: 2px !important;
  }
  #unified-extensions-area {
    padding-block-end: 1px !important;
  }
  panelview .unified-extensions-item-action-button {
    padding-inline: 8px !important;
    padding-block: 4px !important;
  }
  #unified-extensions-manage-extensions {
    margin-inline: 3px !important;
    padding: 8px 10px !important;
    margin-block-end: 4px !important;
  }
  #unified-extensions-panel .unified-extensions-item {
    margin-block: 2px !important;
  }
  #unified-extensions-view .unified-extensions-item-action-button:hover {
    background-color: color-mix(in srgb, currentColor 3%, transparent) !important;
  }
  #unified-extensions-view .unified-extensions-item-menu-button.subviewbutton,
  .unified-extensions-item-row-wrapper {
    padding: 0 !important;
  }
  #unified-extensions-view .unified-extensions-item-menu-button.subviewbutton > .toolbarbutton-icon {
    opacity: 0 !important;
    transition: 0.2s ease !important;
  }
  #unified-extensions-panel .unified-extensions-item:hover {
    .unified-extensions-item-menu-button.subviewbutton > .toolbarbutton-icon {
      opacity: 0.85 !important;
    }
    background-color: transparent !important;
  }
  #unified-extensions-view .unified-extensions-item-action-button .panel-no-padding .webextension-browser-action {
    padding: 0 !important;
  }
  #unified-extensions-view .toolbar-menupopup :is(menu, menuitem), .subview-subheader, panelview .toolbarbutton-1, .subviewbutton, .widget-overflow-list .toolbarbutton-1 {
    max-height: 3em !important;
  }
  #unified-extensions-view .subviewbutton-iconic {
    & > .toolbarbutton-icon {
      width: 1em !important;
      height: 1em !important;
      padding: 0.6em !important;
    }
  }
}

/* 1 - Apply grid view in extension menu */
@media (-moz-bool-pref: "mod.extension.viewgrid") {
  /* Set width of Unified Extension View */
  #unified-extensions-view {
    width: calc(var(--menu-panel-width) - 118px) !important;
  }

  /* Hide the header as well as texts and settings icon for each extension, so only icons are visible */
  #unified-extensions-description,
  #unified-extensions-view .panel-header,
  #unified-extensions-view > :nth-child(2),
  .unified-extensions-item-name,
  .unified-extensions-item-message,
  .unified-extensions-item-message-hover,
  .unified-extensions-item-message-hover-menu-button,
  .unified-extensions-item-menu-button {
    display: none !important;
  }

  /* Arrange extensions in a properly centered 4-column grid */
  #overflowed-extensions-list, #unified-extensions-area, .unified-extensions-list {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important; /* 4 columns */
    justify-content: left !important;
    align-items: center !important;
    margin-inline: 7px !important;
    width: 0px !important;
  }

  #overflowed-extensions-list {
    padding-block-start: 5px !important;
  }
  #unified-extensions-area {
    padding-block-end: 10px !important;
  }

  /* Ensure the extensions are fully centered with squircle hover shape, and reduce unneeded margins/paddings  */
  .unified-extensions-item {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 12px !important;
  }
  .unified-extensions-item-icon, .unified-extensions-item .webextension-browser-action.subviewbutton > .toolbarbutton-badge-stack {
    margin: 0px !important;
  }
  panelview .unified-extensions-item-action-button {
    padding: 10px 10px !important;
  }
  
  /* Set proper padding for the Manage Extensions button */
  #unified-extensions-manage-extensions {
    padding: 8px 16px !important;
    margin-block-end: 4px !important;
  }
  
  /* Set lighter opacity for passive extension buttons */
  .unified-extensions-item-icon {
    opacity: 0.6;
  }
  .unified-extensions-item-action-button:hover {
    background-color: color-mix(in srgb, currentColor 20%, transparent) !important;
  }

  #unified-extensions-view toolbarseparator {
    margin-top: 0px !important;
  }
}
/* Invert the passive extension icons in dark mode */
@media (prefers-color-scheme: dark) {
  @media (-moz-bool-pref: "mod.extension.viewgrid") {
    .unified-extensions-item-icon {
      filter: invert(1) !important;
    }
  }
}

/* 2 - Hide Zoom button in URL bar */
@media (-moz-bool-pref: "mod.lean.hide-zoom") {
  #urlbar-zoom-button {
    display: none !important;
  }
}

/* 3 - Show translation button when hovering URL bar in Single Toolbar mode */
:root[zen-single-toolbar='true'] {
  @media (-moz-bool-pref: "mod.lean.show-translation") {
    #urlbar:hover {
      #translations-button {
        display: inherit !important; 
      }
      #translations-button {
        &[hidden="true"] {
          #translations-button-circle-arrows, #translations-button-locale {
            visibility: collapse !important;
          }
          #translations-button-icon {
            visibility: visible !important;
          }
        }
      }
    }
    #translations-button {
      transition: all 0.1s ease !important;
    }
    & #translation-button:not([open]) {
      margin-inline-start: calc(-8px - 2 * var(--urlbar-icon-padding));
      transform: translateX(100%);
      opacity: 0;
    }
    #urlbar:hover #translations-button {
      opacity: 1 !important;
      margin-inline-start: 0 !important;
      transform: none !important;
      display: flex;
    }
  }
}

/* 4 - Show page action button for extensions when hovering URL bar in Single Toolbar mode */
:root[zen-single-toolbar='true'] {
  @media (-moz-bool-pref: "mod.lean.show-pageactions") {
    #urlbar:hover {
      .urlbar-addon-page-action {
        display: inherit !important;
      }
    }
    #page-action-buttons {
      order: 1 !important;
    }
  }
}

/* 5 - Hide top workspace indicator unless when editing space name
 * + adjust Essentials area bottom padding */
@media -moz-pref("mod.lean.top-workspace") {
  .zen-current-workspace-indicator:not(:has(.tab-label-container-editing)) {
    visibility: collapse !important;
  }
  @media -moz-pref("mod.lean.pinned-ext") {
    .zen-essentials-container:not(:empty) {
      padding-bottom: 4px !important;
    }
    @media not -moz-pref("mod.lean.bottom-buttons") {
      #main-window[zen-single-toolbar="true"] {
        .zen-essentials-container {
          padding-bottom: 4px !important;
          padding-top: 4px !important;
        }
      }
    }
  }
  @media not -moz-pref("mod.lean.pinned-ext") {
    .zen-essentials-container:not(:empty), .zen-current-workspace-indicator {
      padding-bottom: 0px !important;
    }
    #main-window[zen-single-toolbar="true"] {
      .zen-essentials-container {
        padding-bottom: 6px !important;
      }
    }
  }
}

/* 6 - Hide bottom buttons area unless tab sidebar is hovered */
:root:not([customizing]) {
  @media -moz-pref("mod.lean.bottom-buttons") {
    #zen-sidebar-foot-buttons, #zen-workspaces-button, #zen-sidebar-foot-buttons toolbarbutton {
      transition: ease 0.2s !important;
    }
    #titlebar:not(:hover) {
      zen-workspace {
        & > arrowscrollbox {
          &[overflowing] {
            &::after {
              height: 0px !important;
            }
          }
        }
      }
      #zen-sidebar-foot-buttons {
        min-height: 3px !important;
        gap: 1px !important;
        padding-top: 1px !important;
        toolbarbutton, #zen-workspaces-button {
          opacity: 0 !important;
          height: 0px !important;
        }
      }
    }
  }
}

/* 7 - Ninja top buttons on Single Toolbar mode
 * You can hover slightly above URL bar to access the top buttons, but you can't see it */
:root[zen-single-toolbar="true"] {
  --top-toolbar-hover-opacity: 0;
  @media -moz-pref("mod.lean.ninja-top-buttons") {
    #zen-sidebar-top-buttons, #zen-sidebar-top-buttons-customization-target, #zen-sidebar-top-buttons toolbarbutton {
      transition: ease 0.2s !important;
    }
    #navigator-toolbox {
      & #zen-appcontent-navbar-wrapper, & #zen-sidebar-top-buttons {
        --zen-toolbar-height: 1px !important;
        opacity: var(--top-toolbar-hover-opacity) !important;
        z-index: 9 !important;
      }
    }
    #navigator-toolbox:not(:hover) {
      & #zen-appcontent-navbar-wrapper, & #zen-sidebar-top-buttons {
        opacity: 0 !important;
      }
    }
  }
}


/* 8 - Only show bookmarks when hovering top navigation bar on Multiple & Collapsed Toolbar mode
 * Mimicking how it works on Single Toolbar */
:root:not([zen-single-toolbar="true"]) {
  @media -moz-pref("mod.lean.bookmarks") {
    #PersonalToolbar:not([collapsed="true"]) {   
      min-height: 2px !important;
      height: 2px !important;
      opacity: 0;
      transition: 0.2s ease !important;
    }
    &[customizing] {
      #PersonalToolbar {
        opacity: 1;
        height: 30px !important;
      }
    }  
    #zen-appcontent-navbar-container:hover {
      #PersonalToolbar {
        opacity: 1;
        height: 30px !important;
      }
    }
    #TabsToolbar {
      margin-block-start: 2px !important;
    }
  }
}

/* 9 - WIP: Bottom buttons as "pinned extensions" on Single Toolbar mode
 * Also hide the workspace buttons, and the separator below tabs area */

/* Part A: When bottom buttons is always shown */
@media -moz-pref("mod.lean.pinned-ext") {
  #main-window[zen-single-toolbar="true"] {
    #titlebar {
      zen-workspace {
        & > arrowscrollbox {
          &[overflowing] {
            &::after {
              height: 0px !important;
            }
          }
        }
      }
    }
    #navigator-toolbox[zen-sidebar-expanded="true"] {
      @media -moz-pref("mod.lean.bottom-buttons") {
        .zen-essentials-container {
          :root[zen-single-toolbar="true"] &:not(:empty) {
            padding-top: 0px !important;
          }
        }
      }
      & #zen-sidebar-foot-buttons {
        order: -1 !important;
        justify-content: center !important;
        padding-inline: calc(var(--zen-toolbox-padding) - 3px) !important;
        gap: 4px !important;
        padding-top: 4px !important;
        padding-bottom: 0px !important;
      }
      #zen-sidebar-foot-buttons toolbarbutton {
        .toolbarbutton-1 {
          padding-inline: 0 !important;
          margin: 0 !important;
          margin-top: 0 !important;
        }
        padding-inline: 0px !important;
        min-width: 40px !important;
        &.toolbarbutton-1 {
          &:not([disabled]) {
            &:hover > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
              background-color: transparent !important;
            }
          }
        }
      }
      #zen-sidebar-foot-buttons toolbarbutton {
        background-color: var(--zen-toolbar-element-bg) !important;
        border-radius: var(--tab-border-radius) !important;
      }
      #zen-sidebar-foot-buttons toolbarbutton:hover {
        background-color: var(--toolbarbutton-hover-background) !important;
      }
      @media not -moz-pref("mod.lean.pinned-ext.workspaces") {  
        #zen-workspaces-button {
          display: none !important; 
          height: 0 !important;
          min-height: 0 !important;
        }
      }
      @media -moz-pref("mod.lean.pinned-ext.workspaces") {  
        #zen-sidebar-foot-buttons {
          gap: 0px !important;
        }
      }
    }
  }
}

@media not -moz-pref("mod.lean.bottom-buttons") {
  @media -moz-pref("mod.lean.pinned-ext") {
    #main-window[zen-single-toolbar="true"] {
      #navigator-toolbox[zen-sidebar-expanded="true"] {
        & #zen-sidebar-foot-buttons {
          min-height: 30px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          height: 30px !important;
        }
        & #zen-sidebar-foot-buttons {
          padding-top: 4px !important;
        }
      }
    }
  }
}

/* Part B: When bottom buttons are only shown in hover */
@media -moz-pref("mod.lean.bottom-buttons") {
  @media -moz-pref("mod.lean.pinned-ext") {
    #main-window[zen-single-toolbar="true"] {
      #navigator-toolbox[zen-sidebar-expanded="true"]:hover {
        & #zen-sidebar-foot-buttons {
          min-height: 30px !important;
          padding-bottom: 4px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          min-width: 40px !important;
          height: 30px !important;
        }
      }
      #navigator-toolbox[zen-sidebar-expanded="true"] {
        & #zen-sidebar-foot-buttons {
          min-height: 0px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          height: 0px !important;
        }
      }
    }
  }
}

/* Name: Zen Back Forward */
/* Description: Hide Back and Forward button when you don't need them */
/* Author: @KiKaraage */
@-moz-document url-prefix("chrome:") {
  :root:not([customizing]) #back-button[disabled] {
    display: none !important;
  }
  
  :root:not([customizing]) #forward-button[disabled] {
    display: none !important;
  }
  
}
/* Name: Hide Extension Name */
/* Description: Hides the name of the extension on tabs loaded from the extension */
/* Author: @ch4og */
@-moz-document url-prefix("chrome:") {
  #urlbar #identity-box.extensionPage #identity-icon-label {
    display: none !important;
  }
  
}
/* Name: SuperPins */
/* Description: This Zen Mod enhances pinned tabs/Essentials, by making some UI/UX changes. */
/* Author: @CosmoCreeper */
@media (-moz-bool-pref: "zen.tabs.vertical") {

    /* Prevents stuff from being clipped off from bottom of Essentials */
    #zen-essentials-container, .zen-essentials-container {
        overflow: visible !important;
    }

    /* Makes essentials transparent (when toggled) */
    :root:has(#theme-SuperPins[uc-essentials-color-scheme="transparent"]) {
        .tabbrowser-tab[zen-essential="true"]:not(:hover):not([selected="true"]) .tab-stack .tab-background {
            background-color: transparent !important;
        }
    }

    @media (-moz-bool-pref: "zen.view.sidebar-expanded") and (not (-moz-bool-pref: "zen.view.sidebar-expanded.on-hover")) {

        /* Default essentials-width and essentials-gap variables (set to browser default) to fix some bugs */
        :root {
            --essentials-width: 49px;
            --essentials-gap: calc(var(--zen-toolbox-padding) - 2px);
        }

        /* Set width of Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-width="Thin"]) {
            --essentials-width: 50px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Normal"]) {
            --essentials-width: 60px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Wide"]) {
            --essentials-width: 70px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Thin"],
            #theme-SuperPins[uc-essentials-width="Normal"],
            #theme-SuperPins[uc-essentials-width="Wide"]) {
            #zen-essentials-container, .zen-essentials-container {
                grid-template-columns: repeat(auto-fit,
                        minmax(var(--essentials-width), auto)) !important;
            }

            .zen-essentials-container {
                max-width: calc(100% - var(--zen-toolbox-padding) * 2);
            }

            @media (-moz-bool-pref: "uc.essentials.grid-count") {
                #zen-essentials-container, .zen-essentials-container {
                    grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
                }
            }
        }

        /* Set margin between Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-gap="Small"]) {
            --essentials-gap: 0px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Normal"]) {
            --essentials-gap: 2px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Big"]) {
            --essentials-gap: 5px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Small"],
            #theme-SuperPins[uc-essentials-gap="Normal"],
            #theme-SuperPins[uc-essentials-gap="Big"]) {
            #zen-essentials-container, .zen-essentials-container {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-tabs-show-separator="never"]) {
        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            display: none !important;
        }

        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                padding-bottom: 5px !important;
            }
        }
    }

    /* Enables legacy layout for pinned tabs (icon only in grid) */
    @media (-moz-bool-pref: "uc.pins.legacy-layout") {
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #tabbrowser-tabs {
                & .tabbrowser-tab {
                    &[zen-pinned-changed="true"]:not([zen-essential])
                    > .tab-stack
                    > .tab-content
                    > .tab-icon-stack {
                    position: unset !important;
                    top: unset !important;
                    }
                }
            }
        }

        #vertical-pinned-tabs-container, .zen-workspace-pinned-tabs-section {
            .tabbrowser-tab[pinned]  {
                .tab-close-button, .tab-reset-button,
                .tab-reset-pin-button, .tab-label-container {
                    display: none !important;
                }
            }
        }

        /*disable icon shift when tab was renamed*/
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            & .zen-workspace-pinned-tabs-section {
                & .tabbrowser-tab>.tab-stack>.tab-content>.tab-icon-stack {
                    left: unset !important;
                }
            }
        }

        /* Make pinned tabs auto-grow to span full width of row */
        @media (-moz-bool-pref: "uc.pins.auto-grow") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                display: flex !important;
                flex-wrap: wrap !important;
                flex-direction: row !important;

                &>.tabbrowser-tab {
                    width: auto !important;
                    min-width: var(--tab-pinned-min-width-expanded) !important;
                    flex: 1 1 auto !important;
                }

                &>tab-group {
                    width: 100% !important;
                }
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                /* Logic for pinned tabs that have auto-grow and grid-count. Must use +1 to fix */
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    &>.tabbrowser-tab {
                        width: calc(100% / (var(--mod-superpins-pins-grid-count) + 1)) !important;
                    }
                }
            }
        }

        @media (not (-moz-bool-pref: "uc.pins.auto-grow")) {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(auto-fit, minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                display: grid !important;
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                }
            }
        }

        /*The actual grid layout*/
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                margin: 0 var(--zen-toolbox-padding) !important;
                padding: 0 var(--zen-toolbox-padding) !important;
                overflow: visible !important;
                padding-bottom: 17px !important;
                gap: 3px 3px !important;
                max-width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
            }

            .tabbrowser-tab {
                --toolbarbutton-inner-padding: 0;
            }

            &>*:not(tab-group) {
                margin: 0 !important;
            }

            &>tab-group .tab-icon-stack {
                margin: auto !important;
            }
        }

        .zen-workspace-pinned-tabs-section {
            position: relative !important;

            .tab-icon-stack {
                margin-left: 50% !important;
                transform: translateX(-50%) !important;
            }
        }

        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            position: absolute !important;
            bottom: 7px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
        }

        @media (-moz-bool-pref: "arcline.superpin") {
            .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                bottom: -4px !important;
            }
        }
    }

    /* Make Essentials look more box like */
    @media (-moz-bool-pref: "uc.essentials.box-like-corners") {
        .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
            border-radius: 5px !important;
        }
    }

    /* If Essentials have a grid count but do not have auto-grow on */
    @media (-moz-bool-pref: "uc.essentials.grid-count") {
        #zen-essentials-container, .zen-essentials-container {
            grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
        }
    }

    /* Make Essentials auto-grow to span full width of a row */
    @media (-moz-bool-pref: "uc.essentials.auto-grow") {
        .tabbrowser-tab[zen-essential="true"] {
            width: auto !important;
            min-width: var(--essentials-width) !important;
            flex: 1 1 auto !important;
        }

        @media (-moz-bool-pref: "uc.essentials.grid-count") {

            /* For auto-grow with grid-count. must use +1 to fix a bug */
            .tabbrowser-tab[zen-essential="true"] {
                width: calc(100% / (var(--mod-superpins-essentials-grid-count) + 1)) !important;
            }
        }

        #zen-essentials-container, .zen-essentials-container {
            display: flex !important;
            flex-wrap: wrap !important;
            flex-direction: row !important;
            width: 100% !important;
        }

        #navigator-toolbox {
            min-width: min-content !important;
        }
    }

    /* Puts Essentials at the bottom */
    :root:has(#theme-SuperPins[uc-essentials-position="bottom"]) {
        #tabbrowser-arrowscrollbox {
            position: relative !important;
            overflow-x: hidden !important;
        }
        
        .zen-essentials-container {
            position: relative !important;
            margin-top: auto !important;
            padding-top: 8px !important;
        }

        /* Adds padding-bottom only when media controls are visible */
        #zen-media-controls-toolbar:not([hidden]) ~ .zen-essentials-container {
            padding-bottom: 10px !important;
        }
        
        #zen-essentials-container, #zen-essentials {
            order: 999 !important;
        }

        #tabbrowser-arrowscrollbox > zen-workspace {
            width: 100% !important;
            padding-top: 0 !important;
        }

        #navigator-toolbox[zen-sidebar-expanded="true"] {
            .zen-essentials-container {
                min-width: 100% !important;
                width: 100% !important;
            }
        }
    }

    /* Adds a little bg to the pinned tabs */
    @media (-moz-bool-pref: "uc.pins.bg") {
        @media (prefers-color-scheme: light) {
            :root {
                --pins-bg-percentage: 40%;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --pins-bg-percentage: 7%;
            }
        }

        /* background color of pinned tabs in a normal state (not hovered/selected) */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background {
            background-color: color-mix(in srgb, white var(--pins-bg-percentage), transparent) !important;
        }

        /* background color when hovering */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 3%), transparent) !important;
        }

        /* background color when selected */
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"] .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"] .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 16%), transparent) !important;
        }

        /* background color when selected and hovering*/
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"]:hover .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"]:hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 18%), transparent) !important;
        }
    }

    /* Adds border to Pins/Essentials (when toggled) */
    :root:has(#theme-SuperPins[uc-superpins-border="essentials"]) {
        #zen-essentials-container, .zen-essentials-container {
            & .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
                border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                        color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="pins"]) {
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="both"]) {
        .tabbrowser-tab[pinned] .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    /* Let pinned tabs have the same selected styling as essentials */
    @media (-moz-bool-pref: "uc.pins.essentials-layout") {

        /* Specific query to overwrite previous one */
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            grid-template-columns: repeat(auto-fit, minmax(var(--essentials-width), auto)) !important;

            &:has(> :nth-child(2)) {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }

            &>.tabbrowser-tab {
                min-width: var(--essentials-width) !important;
            }
        }

        @media (-moz-bool-pref: "uc.pins.grid-count") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--essentials-width), auto)) !important;
            }
        }
    }

    /* pins height */
    :root {
        --pins-height: var(--tab-min-height);
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]) {
        --pins-height: 40px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="normal"]) {
        --pins-height: 50px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        --pins-height: 60px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]),
    :root:has(#theme-SuperPins[uc-pinned-height="normal"]),
    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        .zen-workspace-pinned-tabs-section .tabbrowser-tab {
            height: var(--pins-height) !important;
        }
    }

    @media (-moz-bool-pref: "uc.essentials.same-height") {
        .tabbrowser-tab[zen-essential] {
            height: var(--pins-height) !important;
        }

        .tabbrowser-tab[zen-essential] .tab-background {
            min-height: var(--pins-height) !important;
        }
    }

    /* favicon size */
    :root:has(#theme-SuperPins[uc-favicon-size="small"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 16px !important;
            width: 16px !important;
        }

        /* No need to scale tab throbber as it is same size. */
    }

    :root:has(#theme-SuperPins[uc-favicon-size="normal"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 18px !important;
            width: 18px !important;
        }

        .tab-throbber {
            transform: scale(1.125) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-favicon-size="large"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 20px !important;
            width: 20px !important;
        }

        .tab-throbber {
            transform: scale(1.25) !important;
        }
    }

    /* workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-icon-size="x-small"]) {
        #zen-workspaces-button {
            font-size: x-small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="small"]) {
        #zen-workspaces-button {
            font-size: small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="medium"]) {
        #zen-workspaces-button {
            font-size: medium !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="large"]) {
        #zen-workspaces-button {
            font-size: large !important;
        }
    }

    /* current workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="small"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 12px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="normal"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 14.5px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="large"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 16px !important;
        }
    }

    /* Increase margin below Essentials in case the workspace indicator is not visible. */
    @media (not (-moz-bool-pref: "zen.workspaces.show-workspace-indicator")) {
        .zen-current-workspace-indicator {
            display: none !important;
        }

        .zen-essentials-container {
            padding-bottom: 5px;
        }

        :root:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"]) {
            zen-workspace[active="true"]:has(.zen-workspace-pinned-tabs-section .tabbrowser-tab) {
                &:has(~ #zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container .zen-workspace-tabs-section[active="true"] .tabbrowser-tab) {
                    margin-top: 6px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    min-height: 20px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                        max-height: unset !important;
                    }
                }
            }
        }

        :root:not(:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"])) {
            #tabbrowser-tabs:has(.zen-essentials-container) #zen-tabs-wrapper {
                margin-top: 6px !important;
            }
        }
    }

    /* Ensure that the browser uses SuperPins dim rather than the built-in dim-pending. */
    .tab-icon-image[pending="true"],
    .tabbrowser-tab[pending="true"] .tab-text {
        opacity: 1 !important;
    }

    /* If dim-type is set to icons. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="icons"]) {
        .tab-icon-image[pending="true"] {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="text"]) {
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to icon + text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="both"]) {

        .tab-icon-image[pending="true"],
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    @media (-moz-bool-pref: "uc.tabs.strikethrough-on-pending") {
        .tabbrowser-tab[pending="true"] .tab-text {
            text-decoration: line-through !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.stay-at-top") {
        zen-workspace > arrowscrollbox.workspace-arrowscrollbox {
            overflow-y: hidden !important;
            flex-basis: 100%;
        }

        #tabbrowser-arrowscrollbox .zen-workspace-pinned-tabs-section {
            flex: 0 1 0;
        }
        
        #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            flex: 1 1 0;
            overflow-y: auto !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.active-bg") {
        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"] .tab-stack .tab-background {
            background-color: var(--mod-superpins-pins-active-bg) !important;
            opacity: 1 !important;
        }

        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"]:hover .tab-stack .tab-background {
            opacity: 0.8 !important;
            background-color: var(--mod-superpins-pins-active-bg) !important;
        }
    }

    @media (-moz-bool-pref: "zen.workspaces.indicator-name-center") {
        .zen-current-workspace-indicator-name {
            position: absolute;
            left: 0;
            text-align: center;
            width: 100%;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="top"]) {
        .zen-current-workspace-indicator {
            top: 0;
        }

        .zen-essentials-container {
            margin-top: 48px;
        }

        .workspace-arrowscrollbox {
            margin-top: 50px;
        }

        zen-workspace {
            padding-top: 0 !important;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="bottom"]) {
        .zen-current-workspace-indicator {
            position: fixed !important;
            bottom: 0;
            z-index: 200;
        }

        zen-workspace {
            margin-top: 2px;
        }
    }

    @media (-moz-bool-pref: "uc.remove-sidebar-scrollbar") {
        scrollbox:nth-child(5), #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            scrollbar-width: none !important;
        }
    }
}

/* Name: Tab title fixes */
/* Description: Increase size of tab titles and add make pending tabs standing out more. */
/* Author: @psu */
@-moz-document url-prefix("chrome:") {
  
  /**
  * Zen Mod: Tab title fixes
  * Increase size of tab titles and add make pending tabs standing out more.
  * Pontus Sundén <hi@pontus.cc>
  */
    :root {
      /**
      --psu-tab_title_fixes-font_size: 13px;
      --psu-tab_title_fixes-pending_opacity: 0.55;
      /**/
    }
    #tabbrowser-tabs {
      .tabbrowser-tab {
        #tab-label-input,
        .tab-label {
          font-size: var(--psu-tab_title_fixes-font_size) !important;
        }
        .tab-icon-image,
        .tab-label-container {
          &:not([selected], [multiselected]) {
            opacity: calc(var(--psu-tab_title_fixes-pending_opacity) + 0.3) !important;
          }
        }
        @media (-moz-bool-pref: 'zen.tabs.dim-pending') {
          &[pending='true'] {
            .tab-icon-image,
            .tab-label-container:not([selected], [multiselected]) {
              opacity: var(--psu-tab_title_fixes-pending_opacity) !important;
            }
          }
        }
      }
    }
  
}
/* Name: Better Tab Indicators */
/* Description: This Zen Theme provides some alternative styling for the tabs on the sidebar. */
/* Author: @TheRealMG */
@media (-moz-bool-pref: "zen.tabs.vertical") {
  /* Tab Borders Based on Preference */
  .tabbrowser-tab:not([pinned]):is([multiselected="true"], [selected]) {
    &:has(#uc-tabs[uc-tabs-preferred_color="primary"]) .tab-background {
      border: 2px solid var(--zen-colors-primary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="secondary"]) .tab-background {
      border: 2px solid var(--zen-colors-secondary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="tertiary"]) .tab-background {
      border: 2px solid var(--zen-colors-tertiary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="border"]) .tab-background {
      border: 2px solid var(--zen-colors-border) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="custom"]) .tab-background {
      @media (prefers-color-scheme: light) {
        border: 2px solid var(--uc-tabs-preferred_color, #000000) !important; /* Fallback to black */
      }
      @media (prefers-color-scheme: dark) {
        border: 2px solid var(--uc-tabs-preferred_color, #ffffff) !important; /* Fallback to white */
      }
    }
  }

  /* Background Modification for Selected Tab */
  #tabbrowser-tabs {
    & .tabbrowser-tab {
      &[selected] .tab-background {
        background: color-mix(
          in srgb,
          var(--zen-colors-secondary) 40%,
          transparent
        ) !important;
      }
    }
  }

  /* Dimming Tab Text When Unloaded */
  @media (-moz-bool-pref: "uc.tabs.dim_unloaded") {
    #tabbrowser-tabs {
      & .tabbrowser-tab {
        @media (-moz-bool-pref: "zen.tabs.dim-pending") {
          &[pending="true"] .tab-text {
            opacity: 0.5; /* Dimmed text for pending tabs */
          }
        }
      }
    }
  }
}

/* Name: Only Close On Hover */
/* Description: Show tab's close button only on hover, even on the active tab. */
/* Author: @p-sw */
#tabbrowser-tabs
  .tabbrowser-tab:not([pinned]):is([visuallyselected]):not(:hover)
  .tab-close-button {
  display: none !important;
}

/* Name: Left close button */
/* Description: Move the tab close button to the left side */
/* Author: @markatom */
.tab-content:hover {
  gap: 4.5px;
}

.tab-content:hover .tab-icon-stack {
  display: none;
}

.tab-content:hover .tab-close-button {
  order: -1;
}

.tab-content[selected] .tab-close-button {
  display: none !important;
}

.tab-content[selected]:hover .tab-close-button {
  display: inherit !important;
}

/* Name: Floating History */
/* Description: Improves the history tab by matching the browser theme, make it floating, more responsive, and allow placing it on either side. */
/* Author: @ahmaadaziz */
:root {
    --floating-history-transform-translateX: 110%;
    --floating-history-position-right: 15px;
    --floating-history-position-left: auto;
}

/* Horizontal Position */

:root:has(#theme-Floating-History[theme-floating_history-position="right"]) {
    --floating-history-transform-translateX: 110%;
    --floating-history-position-right: 15px;
    --floating-history-position-left: auto;
}

:root:has(#theme-Floating-History[theme-floating_history-position="left"]) {
    --floating-history-transform-translateX: -110%;
    --floating-history-position-left: 15px;
    --floating-history-position-right: auto;
}

/* Disable dragable splitter */
#sidebar-box[sidebarcommand="viewHistorySidebar"] + splitter {
  display: none !important;
}

/* Make sure content is not affect by history tab sliding in and out */
#tabbrowser-tabbox[flex="1"][tabcontainer="tabbrowser-tabs"] {
    will-change: unset !important;
}

/* History Tab Styles */
#sidebar-box[sidebarcommand="viewHistorySidebar"] {
    order: none !important;
    height: 80% !important;
    width: 22em !important;
  
    position: fixed !important;

    right: var(--floating-history-position-right);
    left: var(--floating-history-position-left);

    transform: translateX(50%) !important;
    z-index: 10;
  
    transform: translateY(12%) !important;
  
    border-radius: var(--zen-border-radius) !important;

    box-shadow: var(--box-shadow-10) !important;
    background: var(--zen-colors-tertiary) !important;
    border: 1px solid var(--zen-colors-border) !important;
    
    transition: transform 0.35s !important;
    visibility: visible !important;
    opacity: 1 !important;
  
  
    &[hidden="true"] {
		display: flex !important;
        transform: translateX(var(--floating-history-transform-translateX)) translateY(12%) !important;
	}
    
    @starting-style {
        display: flex !important;
        transform: translateX(var(--floating-history-transform-translateX)) translateY(12%) !important;
    }
  
    &[checked="true"] {
        display: flex !important;
        transform: translateX(0%) translateY(12%) !important;
    }
}

/* Inner Styles of History Tab */

#sidebar-box[sidebarcommand="viewHistorySidebar"] box#sidebar-header {
    border-bottom: none !important;
}

window#history-panel {
    box-shadow: var(--box-shadow-10) !important;
    background: var(--zen-colors-tertiary) !important;
}

/* Search Bar Styles */
window#history-panel search-textbox#search-box[data-l10n-id="places-history-search"] {
    appearance: none !important;
    background-color: var(--input-bgcolor, var(--zen-colors-tertiary)) !important;
    color: var(--input-color, var(--toolbar-field-color)) !important;
    border: 1px solid var(--zen-input-border-color, rgb(66,65,77));
    border-radius: 4px;
    outline: none;
    box-sizing: border-box;
    padding: 0.5rem !important;

    
    &[focused="true"] {
        background-color: var(--input-bgcolor, var(--toolbar-field-background-color)) !important;
        border: 1px solid var(--input-border-color, rgb(66,65,77));
    }
}


/* View Button Styles */
window#history-panel hbox#sidebar-search-container button#viewButton {
    appearance: none !important;
    margin-inline-end: 4px !important;
    border-radius: 6px !important;
    border: 1px solid transparent !important;
    padding: 2px 4px !important;
    background: transparent !important;
}

window#history-panel hbox#sidebar-search-container button#viewButton:hover {
    background-color: color-mix(in srgb, currentColor 10%, transparent) !important;
}

window#history-panel hbox#sidebar-search-container button#viewButton:active {
    background-color: color-mix(in srgb, currentColor 15%, transparent) !important;
}

window#history-panel hbox#sidebar-search-container {
    margin-bottom: 1rem !important;
}
/* Name: Tab Preview Enhanced */
/* Description: Enhanced tab preview, respecting user background color and padding */
/* Author: @Kaedriz */
#tab-preview-panel {
	/* Matches Zen main background color, also supports gradients */
	@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledBackgroundNative') {
		--panel-background: var(--zen-main-browser-background-toolbar) !important;
	}

	/* Matches Zen panel radius */
	@media not (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
		border-radius: var(--panel-border-radius) !important;
	}

	/* Custom border radius for tab preview*/
	@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
		--panel-border-radius: var(
			--zen-mods-TabPreviewEnhanced-borderRadiusAmount
		) !important;
	}

	/* Removes border around tab preview */
	--zen-appcontent-border: transparent !important;

	/* Shifts panel to the slightly right */
	/* TODO: Make customizable */
	margin-left: 0.5em !important;
}

.tab-preview-thumbnail-container {
	/* Fixes proper tab preview image sizing */
	&:has(canvas) {
		@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledMargins') {
			/* Add padding around tab preview image */
			padding: var(--zen-element-separation);
		}

		/* Hide border above preview */
		border-top: none !important;

		/* Hides padding between tab preview image and tab preview title */
		padding-top: 0 !important;

		/* Shrink preview to match added padding */
		/* TODO: Make optional */
		width: calc(var(--panel-width) - (var(--zen-element-separation) * 2)) px !important;
		height: unset !important;

		/* Some safety code to maintain aspect ratio */
		aspect-ratio: 2 / 1 !important;
	}

	canvas {
		/* Matches Zen panel radius */
		@media not (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
			border-radius: calc(var(--panel-border-radius) / 1.3) !important;
		}

		/* Custom border radius for tab preview image */
		@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
			border-radius: calc(
				var(--zen-mods-TabPreviewEnhanced-borderRadiusAmount) / 1.3
			) !important;
		}
	}
}

/* Name: smaller zen toast popup */
/* Description: Makes the 'New background tab opened!' toast popup notification less distracting and adds hover */
/* Author: @lenzfliker */

#zen-toast-container {
  top: calc(var(--zen-element-separation) * 6) !important;
  
  :root:not([zen-right-side='true']) & {
    right: calc(var(--zen-element-separation) * 2) !important;
  }

  :root[zen-right-side='true'] & {
    left: calc(var(--zen-element-separation) * 2) !important;
  }

  & .zen-toast {
    padding: 6px !important;
    border-radius: 12px !important;
    font-weight: 600 !important;
    font-size: 12px !important;
    box-shadow: 0px !important ;
    background: rgba(255, 255, 255, var(--mod-zentoast-background_opacity, 0.3)) !important;
    border: 1px solid rgba(0, 0, 0, var(--mod-zentoast-border_opacity, 0.3)) !important;
    color: rgba(0, 0, 0, var(--mod-zentoast-text_opacity, 0.3)) !important;
    
    & .description {
        font-size: 10px !important;
    }

    &:hover {
      background: var(--zen-primary-color) !important;
      color: var(--button-primary-color) !important;
      border: 1px solid rgba(0, 0, 0, 0.0) !important;
      transition: 0.3s !important;
    }
  }

}

/* Name: Load Bar */
/* Description: Creates a sleek loading bar and mute status for single toolbar mode. */
/* Author: @Tanay-Kar */
@media (-moz-bool-pref: "zen.view.use-single-toolbar") {
    .browserSidebarContainer.deck-selected::before {
      content: "" !important;
      position: absolute !important;
      top: 0px !important;
      left: 0px !important;
      height: 4px !important; /* Height of the top background */
      max-width: 100% !important;
      width: var(--bar-pcent) !important; /* Ensure full width or customizable width */
      background-color: var(--bar-colour) !important; /* Solid color for the bar */
      border-radius: 0 2px 2px 0; /* Adjust this value to control the roundness of the ends */
      z-index: 1 !important;
      transition: width 0.5s ease-in-out, background 0.2s ease !important; /* Apply smooth transition on width and background */
    }    /* Current tab loading progress and muted status */
    
    
    .browserSidebarContainer.deck-selected:has([zen-glance-selected])::before,
    .browserSidebarContainer.deck-selected.zen-glance-overlay::before {
      max-width: calc(85%) !important;
      left: calc(15%/2) !important;
      border-radius: 6px !important;
    }
    
    .browserSidebarContainer.deck-selected.zen-glance-background::before {
      background: transparent !important;
      height: 0px !important;
    }
    
    :root {
      &:has(.tabbrowser-tab[selected][busy]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 15%;
      }
      &:has(.tabbrowser-tab[selected][busy][pendingicon]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 45%;
      }
      &:has(.tabbrowser-tab[selected][busy][pendingicon][progress]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 85%;
      }
      &:has(.tabbrowser-tab[selected][busy][progress]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 95%;
      }
      &:has(.tabbrowser-tab[selected][muted]:not([busy])) {
        --bar-colour: orangered;
        --bar-pcent: 100%;
        
        .browserSidebarContainer.deck-selected::before {
          border-radius: 0;
        }
      }
    }
  }

/* Name: sleek border */
/* Description: Sleek Zen browser borders with subtle opacity for a refined, modern look. */
/* Author: @Lumio4u */
:root {
  --sno-colors-border: #e8e8e80f;
  --sno-colors-border-hover: #3e3e3eb2;

  #urlbar {
    transform-origin: right;
    transition: all 0.2s linear !important;
    --toolbarbutton-border-radius: 10px;
    --urlbarView-separator-color: var(--zen-colors-border);
    --urlbarView-hover-background: var(--toolbarbutton-hover-background);
    --urlbarView-highlight-background: var(--toolbarbutton-hover-background);
    border: 1px solid var(--sno-colors-border);
    border-radius: var(--toolbarbutton-border-radius);
    overflow: hidden;
    padding: 1px;
  }

  #urlbar:hover {
    border: 1px solid var(--sno-colors-border-hover);
  }

  #urlbar[breakout][breakout-extend] {
    top: 10%;
  }

  #urlbar:is([focused], [open]) > #urlbar-background,
  #searchbar:focus-within {
    background: #000000e5;
  }
}

:root:not([inDOMFullscreen="true"]):not([chromehidden~="location"]):not(
    [chromehidden~="toolbar"]
  ) {
  & #tabbrowser-tabbox #tabbrowser-tabpanels .browserSidebarContainer {
    width: -moz-available;
    border-radius: var(--zen-webview-border-radius, var(--zen-border-radius));
    transform: translate3d(0, 0, 0);
    position: relative;

    --uc-tweak-rounded-corners-shadow-color: var(--sno-colors-border);

    --uc-tweak-rounded-corners-shadow: 0 0 0 1px
      var(--uc-tweak-rounded-corners-shadow-color);

    box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;

    /* Use pseudo element overlay to simulate rounded corners, similar to the
     * tab corners, fixes bug with backdrop-filter. */
    &::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      /* Draw toolbar background on the negative corner space, then draw the
       * same shadow from the browser window on top. */
      box-shadow:
        var(--uc-tweak-rounded-corners-shadow, 0 0 transparent),
        0 0 0 16px var(--zen-main-browser-background) !important;
      clip-path: inset(0);
      pointer-events: none;
    }
  }
}

/* Name: Custom Statusbar */
/* Description: This Mod allows you to adjust the rounding, margin, border thickness and any color of the statusbar. */
/* Author: @Archer7x */
#statuspanel {
  margin: var(--theme-customstatusbar-margin) !important;
}

#statuspanel-label {
  border-radius: var(--theme-customstatusbar-radius) !important;
  padding: 2px 10px !important;
  border: var(--theme-customstatusbar-border_thickness) solid
    var(--theme-customstatusbar-color_border) !important;
  background: var(--theme-customstatusbar-color_background) !important;
  color: var(--theme-customstatusbar-text_color) !important; /* Text color */
}

/* Name: Better Find Bar */
/* Description: Improves the find bar, making it floating with theme match and customization. */
/* Author: @RobotoSkunk */

:root {
	--better-findbar-transform-translateY: 150px;
	--better-findbar-transform-translateX: -50%;
	--better-findbar-position-top: auto;
	--better-findbar-position-bottom: 15px;
	--better-findbar-position-left: 50%;
	--better-findbar-position-right: auto;
}

findbar {
	display: flex !important;

	border-radius: var(--zen-border-radius) !important;
	margin: 0px !important;

	width: 90% !important;
	max-width: calc(var(--theme-better_find_bar-textbox_width) * 1px); 

	height: auto !important;

	position: absolute !important;
	top: var(--better-findbar-position-top);
	bottom: var(--better-findbar-position-bottom);
	left: var(--better-findbar-position-left);
	right: var(--better-findbar-position-right);
	transform: translateX(var(--better-findbar-transform-translateX)) translateY(0);

	overflow: unset !important;
	box-shadow: var(--box-shadow-10);

	background: var(--zen-colors-primary) !important;
	border: 1px solid var(--zen-colors-border) !important;

	transition: transform 0.35s ease !important;

	visibility: visible !important;
	opacity: 1 !important;

	& .findbar-container {
		flex-wrap: wrap;
		overflow-x: auto !important;
		height: auto !important;

		row-gap: 10px;

		& > :first-child {
			width: 100% !important;
		}

		& .findbar-textbox {
			flex-grow: 1;
		}
	}

	&[hidden="true"] {
		transform: translateX(var(--better-findbar-transform-translateX)) translateY(var(--better-findbar-transform-translateY));
	}

	@starting-style {
		transform: translateX(var(--better-findbar-transform-translateX)) translateY(var(--better-findbar-transform-translateY));
	}
}

/* Horizontal Position */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-horizontal_position="left"]
	) {
	--better-findbar-transform-translateX: 0%;
	--better-findbar-position-left: 15px;
	--better-findbar-position-right: auto;
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-horizontal_position="right"]
	) {
	--better-findbar-transform-translateX: 0%;
	--better-findbar-position-left: auto;
	--better-findbar-position-right: 15px;
}

/* Vertical Position */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-vertical_position="top"]
	) {
	--better-findbar-transform-translateY: -150px;
	--better-findbar-position-bottom: auto;
	--better-findbar-position-top: 15px;
}


/* Background blur */
@media (-moz-bool-pref: "theme.better_find_bar.transparent_background") {
	findbar,
	findbar .findbar-textbox:not([status="notfound"]) {
		backdrop-filter: blur(8px);

		background: color-mix(in hsl, var(--zen-colors-primary), transparent 10%) !important;
	}
}

/* Hide highlight checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_highlight="hide_immediately"]
	) {
	findbar .findbar-highlight {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_highlight="hide_on_disable"]
	) {
	findbar checkbox.findbar-highlight:not([checked]) {
		display: none !important;
	}
}

/* Hide match case checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_case="hide_immediately"]
	) {
	findbar .findbar-case-sensitive {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_case="hide_on_disable"]
	) {
	findbar checkbox.findbar-case-sensitive:not([checked]) {
		display: none !important;
	}
}

/* Hide match diacritics checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_diacritics="hide_immediately"]
	) {
	findbar .findbar-match-diacritics {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_diacritics="hide_on_disable"]
	) {
	findbar checkbox.findbar-match-diacritics:not([checked]) {
		display: none !important;
	}
}

/* Hide whole words checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_whole_words="hide_immediately"]
	) {
	findbar .findbar-entire-word {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_whole_words="hide_on_disable"]
	) {
	findbar .findbar-entire-word:not([checked]) {
		display: none !important;
	}
}

/* Hide find status label */
@media (-moz-bool-pref: "theme.better_find_bar.hide_find_status") {
	findbar .findbar-find-status {
		display: none !important;
	}
}

/* Hide found matches label */
@media (-moz-bool-pref: "theme.better_find_bar.hide_found_matches") {
	findbar .findbar-label.found-matches {
		display: none !important;
	}
}

/* Name: Bleeding Corners Fix */
/* Description: Fixes the white outlines (or artifacts) on the rounded corners that can appear on some pages. May cause higher GPU usage on some devices. */
/* Author: @rsiebertdev */
html:not([sizemode="fullscreen"]) {
	.browserStack, browser {
		clip-path: inset(0 round var(--zen-native-inner-radius));
	}
}

/* Name: Tidy Popup */
/* Description: Modifies popup panels, changing divider lines with empty spacer, and makes the button more compact. */
/* Author: @Dinno-DEV */

/* These are for the popups */
menupopup, panel {
  &::part(content) {
    display: flex;
    box-sizing: border-box;
    padding: 6px !important;
    color: var(--panel-color);
/*   
    background: var(--panel-background);
*/
    border-radius: 15px;
    border: 2px solid color-mix(in hsl,var(--panel-border-color), transparent 70%);
    width: var(--panel-width);
    box-shadow: var(--panel-shadow);
    margin: var(--panel-shadow-margin);
    min-width: 0;
    min-height: 0;
    max-height: round(up, 100% - 2 * var(--panel-shadow-margin), 1px);
    max-width: round(up, 100% - 2 * var(--panel-shadow-margin), 1px);
    overflow: clip;
    scrollbar-color: transparent !important;
  }
}

panel toolbarseparator {
  appearance: none;
  min-height: 0;
  border-top: 3px solid color-mix(in hsl,var(--panel-border-color), transparent 100%);
  margin: 8px 4px;
  padding: 0;
}

:is(panelview .toolbarbutton-1, toolbarbutton.subviewbutton, .widget-overflow-list .toolbarbutton-1, .toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"]) > toolbarbutton) {
  &:not([disabled]) {
    padding: 5px 10px !important;
    border-radius: 8px !important;
  }
}

@media (-moz-bool-pref: "mod.tidypopup.usecustomhovercolor") {
  :is(panelview .toolbarbutton-1, toolbarbutton.subviewbutton, .widget-overflow-list .toolbarbutton-1, .toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"]) > toolbarbutton) {
    &:not([disabled]):hover {
      background-color: var(--mod-tidypopup-hovercolor); 
    }
  }
}

@media not (-moz-bool-pref: "mod.tidypopup.usecustomhovercolor") {
  :is(panelview .toolbarbutton-1, toolbarbutton.subviewbutton, .widget-overflow-list .toolbarbutton-1, .toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"]) > toolbarbutton) {
    &:not([disabled]):hover {
      background-color: rgba(80, 80, 250, 1); 
    }
  }
}
  
#appMenu-zoom-controls {
  border-top: 3px solid color-mix(in hsl,var(--panel-border-color), transparent 100%);
  padding-top: 12px !important;
  padding-inline: calc(var(--arrowpanel-menuitem-padding-inline) + var(--uc-arrowpanel-menuitem-margin-inline)) var(--uc-arrowpanel-menuitem-margin-inline);
  padding-block: var(--uc-panel-zoom-padding-block);
  margin: var(--panel-separator-margin-vertical) 0 calc(var(--panel-separator-margin-vertical) * -1);
}

#appMenu-zoom-controls > #appMenu-fullscreen-button2::before {
  border-inline-start: 3px none color-mix(in hsl,var(--panel-border-color), transparent 100%);
}

menu, menuitem, menucaption {
  border-radius: 8px !important;
  padding: 5px 10px !important;
  margin: 2px !important;
  border-radius: 8px !important;
}

@media (-moz-bool-pref: "mod.tidypopup.usecustomhovercolor"){
  menu, menuitem, menucaption {
    &:not([disabled]):hover {
      background-color: var(--mod-tidypopup-hovercolor); 
    }
  }
}

@media not (-moz-bool-pref: "mod.tidypopup.usecustomhovercolor"){
  menu, menuitem, menucaption {
    &:not([disabled]):hover {
      background-color: rgba(80, 80, 250, 1); 
    }
  } 
}

menuseparator::before {
  border-top: 3px solid color-mix(in hsl,var(--panel-border-color), transparent 100%);
}

.panel-view-body-unscrollable {
  border-radius: 8px !important; 
  background: var(--button-background-color-hover) !important;
  align-items: center;
  padding: 3px !important;
}

.downloadMainArea {
  padding-left: 10px !important;
}

/* End of Zen Mods */
